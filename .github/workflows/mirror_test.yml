name: mirrortest

on:
  push:
    branches:
      - ouproj_template

jobs:
  mirror:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout source code
      uses: actions/checkout@v2

    - name: Mirror repository
      run: |
        echo "LIST FILES"
        ls -lah

        pwd

        cd inst/ourproj_template_minimal

        pwd

        echo "INITIATE GIT REPO"
        git init

        echo "set git config"
        git config --local user.name "Your Name"
        git config --local user.email "your-email@example.com"

        echo "add remote origin"
        git remote add origin https://github.com/{TARGET_OWNER}/{TARGET_REPOSITORY}.git

        echo "list files in dir"
        ls -lah

        echo "push to destination repo"
        git push --set-upstream origin main
